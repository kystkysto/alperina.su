function BodyController(){var t=!0;this.position="menu_colapsed",this.expand=function(){t?(t=!1,this.position="menu_expanded"):(t=!0,this.position="menu_colapsed")},this.showMenu=function(){this.expand()},this.getPosition=function(){return window.matchMedia("(max-width: 991px) ").matches?this.position:{}}}function FeedbackController(){}function HomeController(t,e,o,r){r.showQuotes();var n=this;o.get("/api/main/1").then(function(t){n.main=t.data})}function PhotosController(t,e){var o=e.rubric,r=null;this.deselectPhoto=function(){this.photos[r].selected=!1,r=null,this.overlay=!1},this.selectPhoto=function(t){console.log(t),r=t,this.photos[r].selected=!0,this.overlay=!0},this.touglePhoto=function(t){null!==r?this.deselectPhoto():this.selectPhoto(t)},t.get("/api/photo/?rubric="+o).then(function(t){this.photos=t.data}.bind(this))}!function(){function t(t,e){e.html5Mode({enabled:!0});var o={home:{templateUrl:"tmpl/home.html",controller:"HomeController",controllerAs:"Home"},material:{templateUrl:"tmpl/material.html",controller:"MaterialController",controllerAs:"Material"},materials:{templateUrl:"tmpl/materials.html",controller:"MaterialListController",controllerAs:"MaterialList"},san:{templateUrl:"tmpl/san.html",controller:"SanListController",controllerAs:"MaterialList"},scince:{templateUrl:"tmpl/san.html"},photos:{templateUrl:"tmpl/photos.html",controller:"PhotosController",controllerAs:"Photos"},videos:{templateUrl:"tmpl/videos.html",controller:"VideosController",controllerAs:"Videos"},feedback:{templateUrl:"tmpl/feedback.html",controller:"FeedbackController",controllerAs:"Feedback"}};t.when("/",o.home).when("/articles/:rubric/:id",o.material).when("/articles/:rubric",o.materials).when("/club/materials/:rubric",o.materials).when("/club/materials/:rubric/:id",o.material).when("/club/photos/:rubric",o.photos).when("/san/:rubric",o.san).when("/scince/:rubric",o.scince).when("/photos/:rubric",o.photos).when("/videos/:rubric",o.videos).when("/feedback",o.feedback).otherwise({redirectTo:"/"})}angular.module("Alperina",["ngRoute","ngSanitize","ngAnimate","youtube-embed","Alperina.controllers","Alperina.services"]),angular.module("Alperina.controllers",[]),angular.module("Alperina.services",[]),angular.module("Alperina").config(t),t.$inject=["$routeProvider","$locationProvider"]}(),angular.module("Alperina.controllers").controller("BodyController",BodyController),angular.module("Alperina.controllers").controller("FeedbackController",FeedbackController),function(){function t(){function t(t){return a.title=t,a.notifyObservers()}function e(t){return a.quote=t,a.notifyObservers()}function o(t){return a.showTags=t,a.notifyObservers()}function r(t){return a.tags=t?function(t){for(h in u)if(u[h].name==t)return[u[h]]}(t):u,a.notifyObservers()}function n(t){c.push(t)}function l(){return angular.forEach(c,function(t){t()}),a}function i(){return a.title=null,a.quotesShown=!0,a.notifyObservers()}function s(){return a.quotesShown=!1,a.notifyObservers()}var a=this,c=[],u=[{alias:"Актеры",name:"actors",id:1},{alias:"Режиссеры",name:"directors",id:2},{alias:"Продюсеры",name:"producers",id:3},{alias:"Писатели",name:"writers",id:4},{alias:"Шоу-бизнес",name:"show_business",id:5},{alias:"Русский Голливуд",name:"russian_hollywood",id:6}],h=null;a.title="",a.tags=u,a.showTags=!1,a.setTitle=t,a.setQuote=e,a.showQuotes=i,a.hideQuotes=s,a.setShowTags=o,a.setTags=r,a.registerObserverCallback=n,a.notifyObservers=l}angular.module("Alperina.controllers").service("Header",t)}(),function(){function t(t,e,o,r,n,l,i){var s=this,a={update:function(){s.title=i.title,s.quote=i.quote,s.showTags=i.showTags,s.tags=i.tags,s.quotesShown=i.quotesShown}},c=null;for(c in a)i.registerObserverCallback(a[c]);s.path=o.path(),t.$on("$routeChangeSuccess",function(){var t=o.search();t.hasOwnProperty("tag")&&i.setTags(t.tag)}),e.quoteClass="quote_show";var u=function(t){var e=function(t){this.position=0,this.list=t||[]};e.prototype.next=function(){var t=this.position,e=this.list.length;return t+=1,t>=e&&(t=0),this.position=t,this.list[t]},e.prototype.first=function(){return this.list[0]};var o=new e(t);return o},h=function(t){var o=u(t);i.setQuote(o.first().content),e.quoteClass="quote_show",r(function(){e.quoteClass="quote_hide",l(function(){var t=o.next().content;i.setQuote(t),e.quoteClass="quote_show",nextQoute=t},2e3)},1e4)};n.get("/api/quotes/").then(function(t){h(t.data)})}angular.module("Alperina.controllers").controller("HeaderContrller",t),t.$inject=["$rootScope","$scope","$location","$interval","$http","$timeout","Header"]}(),angular.module("Alperina.controllers").controller("HomeController",HomeController),HomeController.$inject=["$rootScope","$sce","$http","Header"],function(){function t(t,e,o,r){var n=this;o.get("/api/material/"+t.id).then(function(t){console.log(t.data),n.material=t.data.material,n.tags=t.data.tags,r.setTitle(n.material.title)})}angular.module("Alperina.controllers").controller("MaterialController",t),t.$inject=["$routeParams","$sce","$http","Header"]}(),function(){function t(t,e,o,r,n,l){var i=o.rubric,s=null,a={},c=0,u=function(t){parseInt(t)===t&&(a.after=t),l.get("/api/material.json",{params:a}).then(function(t){this.showLoadMore=t.data.length>=5?!0:!1,[].push.apply(this.materials,t.data)}.bind(this))},h=function(){c+=5,u.call(this,c)};t.$on("$routeUpdate",function(){s=r.search().tag,a.tag=s,u.call(this)}.bind(this)),a.rubric=i,"persons"===i&&(s=r.search().tag,a.tag=s),this.materials=[],this.showLoadMore=!1,this.showTags=n.showTags,this.path=r.path(),this.loadMore=h,u.call(this)}angular.module("Alperina.controllers").controller("MaterialListController",t),t.$inject=["$scope","$rootScope","$routeParams","$location","Header","$http"]}(),function(){function t(t,e,o,r,n){var l=e.rubric;n.get("/api/material/new.json?rubric="+l).then(function(t){this.materials=t.data}.bind(this)),this.showTags=r.showTags,this.path=o.path()}angular.module("Alperina.controllers").controller("SanListController",t),t.$inject=["$rootScope","$routeParams","$location","Header","$http"]}(),function(){function t(t,e,o){function r(t){var e=null;for(e in i.items)i.items[e]=e===t?!i.items[e]:!1}function n(t){var o=e.path();return o.indexOf(t)>-1?!0:!1}function l(){var t=e.search(),r=e.path();o.hideQuotes().setShowTags("/articles/persons"==r).setTitle(i.titles[r]),t.hasOwnProperty("tag")||o.setTags()}var i=this,s=null,a=e.path();i.titles={"/articles/persons":"Персоны","/articles/reviews":"Рецензии","/articles/travel":"Путешествия","/club/materials/news":"Клуб одесситов - Новости","/club/photos/photos":"Клуб одесситов - Фото","/videos/club":"Клуб одесситов - Видео","/san/poetry":"Стихи","/san/songs":"Песни","/san/stories":"Рассказы","/san/thoughts":"Мысли","/scince/synopsis":"Автореферат","/san/thoughts":"Мысли","/scince/thesis":"Диссертация","/photos/self":"Фото - САНолюбование","/photos/other":"Фото - САН техника","/videos/self":"Видео - САНолюбование","/videos/other":"Видео - КлипС.А.","/feedback":"Обратная связь"},l(),i.items={articles:!1,club:!1,san:!1,scince:!1,photos:!1,videos:!1};for(s in i.items)a.indexOf(s)>-1&&r(s);i.expandSubMenu=r,i.selectedItem=n,t.$on("$routeChangeSuccess",function(){l()})}angular.module("Alperina.controllers").controller("MenuController",t),t.$inject=["$rootScope","$location","Header"]}(),angular.module("Alperina.controllers").controller("PhotosController",PhotosController),PhotosController.$inject=["$http","$routeParams"],angular.module("Alperina.controllers").directive("youtube",function(){return{scope:{code:"@"},template:'<div style="height:400px;"><iframe style="overflow:hidden;height:100%;width:100%" width="100%" height="100%" src="http://www.youtube.com/embed/{{code}}" frameborder="0" allowfullscreen></iframe>'}}),function(){function t(t,e,o,r,n,l){var i=e.rubric;l.get("/api/video.json?rubric="+i).then(function(t){var e=[];t.data.forEach(function(t){t.content=t.content.split("/").pop(-1),e.push(t)}),this.videos=e}.bind(this)),this.showTags=n.showTags,this.path=o.path()}angular.module("Alperina.controllers").controller("VideosController",t),t.$inject=["$rootScope","$routeParams","$location","$sce","Header","$http"]}();
//# sourceMappingURL=maps/app.js.map

function BodyController(){var e=!0;this.position="menu_colapsed",this.expand=function(){e?(e=!1,this.position="menu_expanded"):(e=!0,this.position="menu_colapsed")},this.showMenu=function(){this.expand()},this.getPosition=function(){return window.matchMedia("(max-width: 991px) ").matches?this.position:{}}}function FeedbackController(){}function HomeController(e,t){t.setQuote("Чуть – чуть литературы,<br/>И музыки немного,<br/>И чертова натура,<br/>И лирика – от Бога")}function PhotosController(e,t){var o=t.rubric,r=null;this.deselectPhoto=function(){this.photos[r].selected=!1,r=null,this.overlay=!1},this.selectPhoto=function(e){console.log(e),r=e,this.photos[r].selected=!0,this.overlay=!0},e.get("/api/photo/?rubric="+o).then(function(e){this.photos=e.data}.bind(this))}!function(){function e(e,t){t.html5Mode({enabled:!0});var o={home:{templateUrl:"tmpl/home.html",controller:"HomeController",controllerAs:"Home"},material:{templateUrl:"tmpl/material.html",controller:"MaterialController",controllerAs:"Material"},materials:{templateUrl:"tmpl/materials.html",controller:"MaterialListController",controllerAs:"MaterialList"},san:{templateUrl:"tmpl/san.html",controller:"SanListController",controllerAs:"MaterialList"},scince:{templateUrl:"tmpl/san.html"},photos:{templateUrl:"tmpl/photos.html",controller:"PhotosController",controllerAs:"Photos"},videos:{templateUrl:"tmpl/videos.html",controller:"VideosController",controllerAs:"Videos"},feedback:{templateUrl:"tmpl/feedback.html",controller:"FeedbackController",controllerAs:"Feedback"}};e.when("/",o.home).when("/articles/:rubric/:id",o.material).when("/articles/:rubric",o.materials).when("/club/materials/:rubric",o.materials).when("/club/materials/:rubric/:id",o.material).when("/club/photos/:rubric",o.photos).when("/san/:rubric",o.san).when("/scince/:rubric",o.scince).when("/photos/:rubric",o.photos).when("/videos/:rubric",o.videos).when("/feedback",o.feedback).otherwise({redirectTo:"/"})}angular.module("Alperina",["ngRoute","ngSanitize","youtube-embed","Alperina.controllers","Alperina.services"]),angular.module("Alperina.controllers",[]),angular.module("Alperina.services",[]),angular.module("Alperina").config(e),e.$inject=["$routeProvider","$locationProvider"]}(),angular.module("Alperina.controllers").controller("BodyController",BodyController),angular.module("Alperina.controllers").controller("FeedbackController",FeedbackController),function(){function e(){function e(e){return a.title=e,a.quote=null,a.notifyObservers()}function t(e){return a.quote=e,a.title=null,console.log(a.quote),a.notifyObservers()}function o(e){return a.showTags=e,a.notifyObservers()}function r(e){return a.tags=e?function(e){for(c in s)if(s[c].name==e)return[s[c]]}(e):s,a.notifyObservers()}function n(e){i.push(e)}function l(){return angular.forEach(i,function(e){e()}),a}var a=this,i=[],s=[{alias:"Актеры",name:"actors",id:1},{alias:"Режиссеры",name:"directors",id:2},{alias:"Продюсеры",name:"producers",id:3},{alias:"Писатели",name:"writers",id:4},{alias:"Шоу-бизнес",name:"show_business",id:5},{alias:"Русский Голливуд",name:"russian_hollywood",id:6}],c=null;a.title="",a.tags=s,a.showTags=!1,a.setTitle=e,a.setQuote=t,a.setShowTags=o,a.setTags=r,a.registerObserverCallback=n,a.notifyObservers=l}angular.module("Alperina.controllers").service("Header",e)}(),function(){function e(e,t,o){var r=this,n={updateTitle:function(){r.title=o.title},updatequote:function(){r.quote=o.quote},updateShowTags:function(){r.showTags=o.showTags},updateTags:function(){r.tags=o.tags}},l=null;for(l in n)o.registerObserverCallback(n[l]);r.path=t.path(),e.$on("$routeChangeSuccess",function(){var e=t.search();e.hasOwnProperty("tag")&&o.setTags(e.tag)})}angular.module("Alperina.controllers").controller("HeaderContrller",e),e.$inject=["$rootScope","$location","Header"]}(),angular.module("Alperina.controllers").controller("HomeController",HomeController),HomeController.$inject=["$rootScope","Header"],function(){function e(e,t,o,r){var n=this;o.get("/api/material/"+e.id).then(function(e){console.log(e.data),n.material=e.data.material,n.tags=e.data.tags,r.setTitle(n.material.title)})}angular.module("Alperina.controllers").controller("MaterialController",e),e.$inject=["$routeParams","$sce","$http","Header"]}(),function(){function e(e,t,o,r,n,l){var a=o.rubric,i=null,s={},c=0,u=function(e){parseInt(e)===e&&(s.after=e),l.get("/api/material.json",{params:s}).then(function(e){this.showLoadMore=e.data.length>=5?!0:!1,[].push.apply(this.materials,e.data)}.bind(this))},h=function(){c+=5,u.call(this,c)};e.$on("$routeUpdate",function(){i=r.search().tag,s.tag=i,u.call(this)}.bind(this)),s.rubric=a,"persons"===a&&(i=r.search().tag,s.tag=i),this.materials=[],this.showLoadMore=!1,this.showTags=n.showTags,this.path=r.path(),this.loadMore=h,u.call(this)}angular.module("Alperina.controllers").controller("MaterialListController",e),e.$inject=["$scope","$rootScope","$routeParams","$location","Header","$http"]}(),function(){function e(e,t,o,r,n){var l=t.rubric;n.get("/api/material/new.json?rubric="+l).then(function(e){this.materials=e.data}.bind(this)),this.showTags=r.showTags,this.path=o.path()}angular.module("Alperina.controllers").controller("SanListController",e),e.$inject=["$rootScope","$routeParams","$location","Header","$http"]}(),function(){function e(e,t,o){function r(e){var t=null;for(t in a.items)a.items[t]=t===e?!a.items[t]:!1}function n(e){var o=t.path();return o.indexOf(e)>-1?!0:!1}function l(){var e=t.search(),r=t.path();o.setShowTags("/articles/persons"==r).setTitle(a.titles[r]),e.hasOwnProperty("tag")||o.setTags()}var a=this,i=null,s=t.path();a.titles={"/articles/persons":"Персоны","/articles/reviews":"Рецензии","/articles/travel":"Путешествия","/club/news":"Клуб одесситов - Новости","/club/photos":"Клуб одесситов - Фото","/san/poetry":"Стихи","/san/songs":"Песни","/san/stories":"Рассказы","/san/thoughts":"Мысли","/scince/synopsis":"Автореферат","/san/thoughts":"Мысли","/scince/thesis":"Диссертация","/photos/self":"Фото - САНолюбование","/photos/other":"Фото - САН техника","/videos/self":"Видео - САНолюбование","/videos/other":"Видео - КлипС.А.","/feedback":"Обратная связь"},l(),a.items={articles:!1,club:!1,san:!1,scince:!1,photos:!1,videos:!1};for(i in a.items)s.indexOf(i)>-1&&r(i);a.expandSubMenu=r,a.selectedItem=n,e.$on("$routeChangeSuccess",function(){l()})}angular.module("Alperina.controllers").controller("MenuController",e),e.$inject=["$rootScope","$location","Header"]}(),angular.module("Alperina.controllers").controller("PhotosController",PhotosController),PhotosController.$inject=["$http","$routeParams"],angular.module("Alperina.controllers").directive("youtube",function(){return{scope:{code:"@"},template:'<div style="height:400px;"><iframe style="overflow:hidden;height:100%;width:100%" width="100%" height="100%" src="http://www.youtube.com/embed/{{code}}" frameborder="0" allowfullscreen></iframe>'}}),function(){function e(e,t,o,r,n,l){var a=t.rubric;l.get("/api/video.json?rubric="+a).then(function(e){var t=[];e.data.forEach(function(e){e.content=e.content.split("/").pop(-1),t.push(e)}),this.videos=t}.bind(this)),this.showTags=n.showTags,this.path=o.path()}angular.module("Alperina.controllers").controller("VideosController",e),e.$inject=["$rootScope","$routeParams","$location","$sce","Header","$http"]}();
//# sourceMappingURL=maps/app.js.map
